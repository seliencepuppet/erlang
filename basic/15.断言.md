
## 断言

<br/>

断言 (guard) 是一种用于强化模式匹配功能的结构. 使用断言, 可以在一个模式上做一些简单的变量测试比较. 假如我们想要写一个函数 max(X,Y) 求出X与Y之间的最大值, 那么可以使用断言来实现它:

```erl
max(X,Y) when X > Y -> X;
max(X,Y) -> Y.
```

当X大于Y的时候, 第一个子句就得到匹配, 其结果为X.

如果第一个子句不匹配, 那么尝试匹配第二个子句, 第二个子句总是返回第2个参数Y. 此时Y必定大于等于X, 否则, 第一个子句会被先匹配.

你可以在函数的定义的头部使用断言, 此时断言必须以关键字when开头, 当然也可以在任何语言中允许使用表达式的地方使用断言. 当断言用于表达式时, 它们会被求值为一个原子true或者false. 如果断言求值为true, 那么我们认为求值成功, 否则就认为求值失败.

<br/>

## 断言序列

<br/>

断言序列可以是单个断言也可以是一系列用分号 (;) 分开的断言集合. 在断言集合C1;C2;...; Cn中, 只要任何一个断言为true, 那么整个断言序列就为true.

断言也可以是一系列用逗号分开的断言集合. 断言集合GuardExpr1, GuardExpr2, ..., GuardExprN中, 只有所有的断言都为true, 整个断言序列才为true.

合法的断言表达式只是合法Erlang表达式的子集. 我们把断言表达式限制为Erlang表达式的子集是为了保证断言表达式没有副作用. 由于断言是模式匹配的一种扩展, 而模式匹配又必须是无副作用的, 所以保证断言没有福作用也就成为一种必然.

